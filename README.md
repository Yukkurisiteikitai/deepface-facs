# 🎭 FACS Analyzer

**Facial Action Coding System (FACS)** に基づく顔表情分析ツール。

## ✨ 機能

- 🎥 **リアルタイム分析** - カメラからの顔表情をリアルタイムで分析
- 📹 **記録・再生** - 分析結果を記録して後から再生
- 🎬 **動画エクスポート** - 記録をMP4動画として出力
- 🌐 **Webサーバー** - スマホからブラウザ経由でアクセス

## 🚀 クイックスタート

```bash
# インストール
pip install -r requirements.txt

# 起動（インタラクティブメニュー）
python facs_cli.py
```

## 📖 使い方

### インタラクティブモード

```bash
python facs_cli.py
```

矢印キーでメニューを選択、Enterで決定します。

```
==================================================
  🎭 FACS Analyzer
==================================================

  > 🎥 リアルタイム分析
    📹 記録モード
    ▶️  記録を再生
    🎬 MP4にエクスポート
    📁 記録一覧
    🌐 Webサーバー起動
    🖼️  画像/動画を分析
    ⚙️  設定
    ❌ 終了

--------------------------------------------------
  ↑/↓: 選択  Enter: 決定  q: 終了
--------------------------------------------------
```

### メニュー説明

| メニュー | 説明 |
|---------|------|
| リアルタイム分析 | カメラで顔をリアルタイム分析 |
| 記録モード | 分析結果をファイルに保存 |
| 記録を再生 | 保存した記録を再生 |
| MP4にエクスポート | 記録を動画ファイルに変換 |
| 記録一覧 | 保存された記録を一覧表示・削除 |
| Webサーバー | スマホからアクセス可能なサーバー起動 |
| 画像/動画を分析 | ファイルを分析 |
| 設定 | 記録ディレクトリの変更など |

## ⌨️ キー操作

### メニュー共通
- `↑/↓`: 選択移動
- `Enter`: 決定
- `q`: 戻る/終了

### リアルタイム分析・記録
- `q`: 終了

### 再生
- `Space`: 再生/一時停止
- `←/→` または `A/D`: 1フレーム移動
- `↑/↓` または `W/S`: 速度変更
- `0-9`: シーク (0%〜90%)
- `q`: 終了

### 記録一覧
- `d`: 選択した記録を削除

## 📁 記録ファイル

```
recordings/
├── 20240114_120000.jsonl      # 分析データ
└── 20240114_120000_meta.json  # メタデータ
```

## 🔧 トラブルシューティング

### カメラが認識されない
→ リアルタイム分析でカメラ1や2を選択

### Webサーバーにアクセスできない
→ HTTPSモードを試す、同じWiFiに接続されているか確認

### 処理が遅い
→ 高速モード(fast)を選択

## 📄 ライセンス

MIT License


